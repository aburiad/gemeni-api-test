<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Create Post — AI Post Writer</title>
    <style>
        :root {
            --panel-w: 340px;
            --gap: 18px;
            --accent: #2563eb;
            --bg: #f7fafc;
            --card: #ffffff;
            --muted: #6b7280;
        }

        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin: 0;
            background: var(--bg);
            color: #111827;
        }

        .page {
            display: flex;
            gap: var(--gap);
            padding: 28px;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .left {
            width: var(--panel-w);
            background: var(--card);
            border-radius: 10px;
            padding: 18px;
            box-shadow: 0 6px 18px rgba(12, 20, 40, 0.06);
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        h2 {
            margin: 0 0 6px 0;
            font-size: 18px;
        }

        label {
            font-size: 13px;
            color: var(--muted);
            display: block;
            margin-bottom: 6px;
        }

        .control {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
            margin-bottom: 8px;
        }

        .segmented button {
            border: 1px solid #e6eefb;
            background: transparent;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .segmented button.active {
            background: linear-gradient(180deg, #2563eb 0%, #1e40af 100%);
            color: #fff;
            border-color: transparent;
        }

        .tone input {
            margin-right: 8px;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e6e9ee;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
            background: #fbfdff;
        }

        textarea {
            min-height: 90px;
            resize: vertical;
        }

        .btn {
            display: inline-block;
            padding: 10px 14px;
            border-radius: 10px;
            background: var(--accent);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        .btn:active {
            transform: translateY(1px)
        }

        .meta {
            font-size: 12px;
            color: var(--muted);
        }

        .right {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .preview {
            background: var(--card);
            padding: 18px;
            border-radius: 10px;
            min-height: 220px;
            box-shadow: 0 6px 18px rgba(12, 20, 40, 0.04);
        }

        .preview h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
        }

        .small {
            font-size: 13px;
            color: var(--muted)
        }

        @media (max-width:860px) {
            .page {
                flex-direction: column;
            }

            .left {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="page" role="main">
        <!-- LEFT PANEL: AI POST WRITER -->
        <aside class="left" aria-labelledby="ai-writer-title">
            <div>
                <h2 id="ai-writer-title">AI Post Writer</h2>
                <div class="meta">Create social posts fast — choose type, tone and topic.</div>
            </div>

            <!-- Post Type -->
            <div>
                <label for="post-type">Post type</label>
                <div class="segmented control" role="tablist" aria-label="Post type">
                    <button id="type-short" class="active" data-type="short" type="button">Short</button>
                    <button id="type-long" data-type="long" type="button">Long</button>
                </div>
            </div>

            <!-- Tone -->
            <div>
                <label>Tone</label>
                <div class="control tone" role="radiogroup" aria-label="Tone">
                    <label><input type="radio" name="tone" value="funny" checked /> Funny</label>
                    <label><input type="radio" name="tone" value="formal" /> Formal</label>
                    <label><input type="radio" name="tone" value="persuasive" /> Persuasive</label>
                </div>
            </div>

            <!-- Topic -->
            <div>
                <label for="topic">Topic</label>
                <input id="topic" type="text" placeholder="e.g. 5 tips for summer skincare" />
            </div>

            <!-- Optional: extra prompt -->
            <div>
                <label for="extra">Extra (hashtags, CTA)</label>
                <input id="extra" type="text" placeholder="e.g. #skincare #summer — include CTA" />
            </div>

            <!-- Generate button -->
            <div style="margin-top:6px;">
                <button id="generateBtn" class="btn" type="button">Generate with AI</button>
            </div>

            <div style="margin-top:auto; font-size:12px; color:var(--muted);">
                Tip: press <strong>Generate</strong> to see a preview on the right.
            </div>
        </aside>

        <!-- RIGHT: Preview / Editor -->
        <section class="right" aria-label="Post preview">
            <div class="preview" id="preview">
                <h3>Preview</h3>
                <div id="preview-content" class="small">No content yet — click <strong>Generate with AI</strong>.</div>
            </div>

            <div class="preview">
                <h3>Post details</h3>
                <div class="small">Type: <span id="out-type">Short</span> · Tone: <span id="out-tone">Funny</span></div>
            </div>
        </section>
    </div>


    <script>

        async function generateWithGemini(prompt) {
            const res = await fetch("/api/gemini", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ prompt })
            });
            const data = await res.json();
            return data.candidates?.[0]?.content?.parts?.[0]?.text || "No content generated.";
        }
        // small interactive touches (no AI calls)
        const typeBtns = document.querySelectorAll('.segmented button');
        const toneRadios = document.querySelectorAll('input[name="tone"]');
        const generateBtn = document.getElementById('generateBtn');
        const previewContent = document.getElementById('preview-content');
        const outType = document.getElementById('out-type');
        const outTone = document.getElementById('out-tone');

        typeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                typeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        function getSelectedTone() {
            return Array.from(toneRadios).find(r => r.checked).value;
        }

        function getSelectedType() {
            return document.querySelector('.segmented button.active').dataset.type || 'short';
        }

        generateBtn.addEventListener('click', () => {
            const topic = document.getElementById('topic').value.trim();
            const extra = document.getElementById('extra').value.trim();
            const tone = getSelectedTone();
            const type = getSelectedType();

            outType.textContent = type[0].toUpperCase() + type.slice(1);
            outTone.textContent = tone[0].toUpperCase() + tone.slice(1);

            // simple faux-generation to show structure
            previewContent.textContent = 'Generating...';
            setTimeout(() => {
                const sample = (type === 'short')
                    ? `(${tone}) ${topic || 'Your topic here'} — Quick social caption. ${extra ? ' ' + extra : ''}`
                    : `(${tone}) ${topic || 'Your topic here'} — Longer social post: start with a hook, add 2–3 value points, finish with CTA. ${extra ? ' ' + extra : ''}`;
                previewContent.textContent = sample;
            }, 600);
        });
    </script>
</body>

</html>